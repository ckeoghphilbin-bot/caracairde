<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CaraCairde</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: linear-gradient(180deg, #ffe4ef, #f6f0ff);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card {
  background: #fff;
  width: 100%;
  max-width: 420px;
  padding: 28px;
  border-radius: 24px;
  box-shadow: 0 20px 50px rgba(0,0,0,.12);
}

h1 {
  text-align: center;
  margin-bottom: 8px;
}

.tagline {
  text-align: center;
  color: #666;
  margin-bottom: 24px;
}

input {
  width: 100%;
  padding: 14px;
  margin-bottom: 12px;
  border-radius: 12px;
  border: 1px solid #ddd;
  font-size: 16px;
}

button {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 14px;
  background: #ff7eb6;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 10px;
}

.secondary {
  background: #8aa7ff;
}

.link {
  text-align: center;
  color: #555;
  cursor: pointer;
  margin-top: 8px;
}

.small {
  font-size: 14px;
}

.hidden {
  display: none;
}

.error {
  color: #c0392b;
  text-align: center;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="card">

  <h1>CaraCairde</h1>
  <div class="tagline">Local friendship Â· shared interests Â· no dating Â· no pressure</div>

  <div id="error" class="error"></div>

  <!-- SIGN UP -->
  <div id="signup">
    <input id="signupEmail" type="email" placeholder="Email" />
    <input id="signupPassword" type="password" placeholder="Password" />
    <input id="signupConfirm" type="password" placeholder="Confirm password" />

    <label class="small">
      <input type="checkbox" onclick="togglePassword()"> Show password
    </label>

    <button onclick="createAccount()">Create account</button>

    <div class="link" onclick="showLogin()">Already have an account? Log in</div>
  </div>

  <!-- LOGIN -->
  <div id="login" class="hidden">
    <input id="loginEmail" type="email" placeholder="Email" />
    <input id="loginPassword" type="password" placeholder="Password" />

    <label class="small">
      <input type="checkbox" onclick="togglePassword()"> Show password
    </label>

    <button onclick="login()">Log in</button>

    <div class="link small" onclick="resetPassword()">Forgot password?</div>
    <div class="link" onclick="showSignup()">Back to sign up</div>
  </div>

</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  sendPasswordResetEmail
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDs3isKSoDrgTV00P0XQbm3RP5RZOufvIE",
  authDomain: "ccsq-c2e3e.firebaseapp.com",
  projectId: "ccsq-c2e3e",
  storageBucket: "ccsq-c2e3e.firebasestorage.app",
  messagingSenderId: "1092085359746",
  appId: "1:1092085359746:web:9184879638b1183ce4009b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.showLogin = () => {
  signup.classList.add("hidden");
  login.classList.remove("hidden");
  error.textContent = "";
};

window.showSignup = () => {
  login.classList.add("hidden");
  signup.classList.remove("hidden");
  error.textContent = "";
};

window.togglePassword = () => {
  document.querySelectorAll("input[type=password]").forEach(i => {
    i.type = i.type === "password" ? "text" : "password";
  });
};

window.createAccount = () => {
  const email = signupEmail.value;
  const password = signupPassword.value;
  const confirm = signupConfirm.value;

  if (!email || !password || !confirm) {
    error.textContent = "Fill in all fields";
    return;
  }

  if (password !== confirm) {
    error.textContent = "Passwords do not match";
    return;
  }

  createUserWithEmailAndPassword(auth, email, password)
    .then(() => alert("Account created ðŸ’•"))
    .catch(e => error.textContent = e.message);
};

window.login = () => {
  const email = loginEmail.value;
  const password = loginPassword.value;

  if (!email || !password) {
    error.textContent = "Enter email and password";
    return;
  }

  signInWithEmailAndPassword(auth, email, password)
    .then(() => alert("Welcome back ðŸ’—"))
    .catch(e => error.textContent = e.message);
};

window.resetPassword = () => {
  const email = loginEmail.value;

  if (!email) {
    error.textContent = "Enter your email first";
    return;
  }

  sendPasswordResetEmail(auth, email)
    .then(() => alert("Password reset email sent ðŸ’Œ"))
    .catch(e => error.textContent = e.message);
};
</script>

</body>
</html>