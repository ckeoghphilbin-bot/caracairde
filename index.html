<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CaraCairde</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(180deg, #fde2ea, #f7cdd8);
    min-height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .card {
    background: #fff;
    width: 90%;
    max-width: 420px;
    padding: 24px;
    border-radius: 22px;
    box-shadow: 0 20px 40px rgba(0,0,0,.1);
    text-align: center;
  }

  h1 {
    margin: 0;
    font-size: 28px;
  }

  .tagline {
    color: #666;
    margin: 8px 0 20px;
  }

  input {
    width: 100%;
    padding: 14px;
    margin-bottom: 12px;
    border-radius: 14px;
    border: 1px solid #ddd;
    font-size: 16px;
  }

  button {
    width: 100%;
    padding: 14px;
    border-radius: 16px;
    border: none;
    font-size: 16px;
    cursor: pointer;
  }

  .primary {
    background: #e59ab0;
    color: #fff;
    margin-top: 10px;
  }

  .secondary {
    background: #e8e8e8;
    color: #333;
    margin-top: 10px;
  }

  .link {
    margin-top: 14px;
    color: #5a7bdc;
    cursor: pointer;
  }

  .error {
    color: #c0392b;
    margin-top: 10px;
  }

  .checkbox {
    text-align: left;
    font-size: 14px;
    margin: 6px 0 14px;
  }
</style>
</head>

<body>

<div class="card">
  <h1>CaraCairde</h1>
  <div class="tagline">Local friendship Â· shared interests Â· no dating Â· no pressure</div>

  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password (min 6 characters)">
  <input id="confirm" type="password" placeholder="Confirm password">

  <div class="checkbox">
    <input type="checkbox" id="showPass"> Show password
  </div>

  <button class="primary" onclick="signUp()">Create account</button>
  <button class="secondary" onclick="logIn()">Log in</button>

  <div class="link" onclick="resetPassword()">Forgot password?</div>
  <div id="error" class="error"></div>

  <p style="margin-top:20px;color:#777;font-size:14px;">
    A calm place to meet people â€” not perform.
  </p>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDs3isKSoDrgTV00P0XQbm3RP5RZOufvIE",
    authDomain: "ccsq-c2e3e.firebaseapp.com",
    projectId: "ccsq-c2e3e",
    storageBucket: "ccsq-c2e3e.appspot.com",
    messagingSenderId: "1092085359746",
    appId: "1:1092085359746:web:9184879638b1183ce4009b"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const confirmInput = document.getElementById("confirm");
  const errorBox = document.getElementById("error");
  const showPass = document.getElementById("showPass");

  showPass.addEventListener("change", () => {
    const type = showPass.checked ? "text" : "password";
    passwordInput.type = type;
    confirmInput.type = type;
  });

  function cleanEmail() {
    return emailInput.value.trim();
  }

  window.signUp = () => {
    errorBox.textContent = "";

    const email = cleanEmail();
    const password = passwordInput.value;
    const confirm = confirmInput.value;

    if (!email) {
      errorBox.textContent = "Please enter your email ðŸ’—";
      return;
    }

    if (password.length < 6) {
      errorBox.textContent = "Password must be at least 6 characters";
      return;
    }

    if (password !== confirm) {
      errorBox.textContent = "Passwords do not match";
      return;
    }

    createUserWithEmailAndPassword(auth, email, password)
      .then(() => {
        alert("Account created ðŸŽ‰");
      })
      .catch(err => {
        errorBox.textContent = err.message;
      });
  };

  window.logIn = () => {
    errorBox.textContent = "";

    const email = cleanEmail();
    const password = passwordInput.value;

    if (!email || !password) {
      errorBox.textContent = "Please enter email and password";
      return;
    }

    signInWithEmailAndPassword(auth, email, password)
      .then(() => {
        alert("Logged in ðŸ’—");
      })
      .catch(err => {
        errorBox.textContent = err.message;
      });
  };

  window.resetPassword = () => {
    const email = cleanEmail();

    if (!email) {
      errorBox.textContent = "Enter your email to reset password";
      return;
    }

    sendPasswordResetEmail(auth, email)
      .then(() => {
        alert("Password reset email sent ðŸ’Œ");
      })
      .catch(err => {
        errorBox.textContent = err.message;
      });
  };
</script>

</body>
</html>